import type { Locale } from 'date-fns'
import { enUS, sv } from 'date-fns/locale'

import type { ScheduledSessionStatus, WorkoutIntensity } from './types'

export type AppLanguage = 'en' | 'sv'

const DATE_LOCALES: Record<AppLanguage, Locale> = {
  en: enUS,
  sv,
}

const WORKOUT_TYPE_NAMES: Record<AppLanguage, Record<string, string>> = {
  en: {},
  sv: {
    strength: 'Styrka',
    run: 'Lopning',
    cardio: 'Kondition',
    mobility: 'Rorlighet',
  },
}

const SESSION_STATUS_LABELS: Record<AppLanguage, Record<ScheduledSessionStatus, string>> = {
  en: {
    planned: 'planned',
    in_progress: 'in progress',
    completed: 'completed',
    skipped: 'skipped',
  },
  sv: {
    planned: 'planerad',
    in_progress: 'pagaende',
    completed: 'klar',
    skipped: 'overhoppad',
  },
}

const INTENSITY_LABELS: Record<AppLanguage, Record<WorkoutIntensity, string>> = {
  en: {
    low: 'Low',
    medium: 'Medium',
    high: 'High',
  },
  sv: {
    low: 'Lag',
    medium: 'Medel',
    high: 'Hog',
  },
}

const COPY = {
  en: {
    common: {
      close: 'Close',
      cancel: 'Cancel',
      save: 'Save',
      create: 'Create',
      duplicate: 'Duplicate',
      saving: 'Saving...',
    },
    appHeader: {
      kicker: 'Workout Tracker',
      title: 'Consistency dashboard',
      viewSwitcherAria: 'View switcher',
      languageSwitcherAria: 'Language switcher',
      calendar: 'Calendar',
      graphs: 'Graphs',
      templateLabel: 'Template',
      selectTemplate: 'Select template',
      newTemplate: 'New template',
      duplicateTemplate: 'Duplicate template',
      importTemplate: 'Import 4-day template',
      importingTemplate: 'Importing...',
      addWorkout: 'Add workout',
      useDarkMode: 'Use dark mode',
      useLightMode: 'Use light mode',
      english: 'English',
      swedish: 'Svenska',
    },
    filterBar: {
      ariaLabel: 'Workout type filters',
      allTypes: 'All types',
    },
    calendar: {
      sectionAria: 'Workout calendar',
      gridAria: 'Monthly workout calendar',
      previous: 'Previous',
      next: 'Next',
      weekdayLabels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
      done: 'done',
      planned: 'planned',
      dayAria: (date: string, workouts: number, sessions: number) =>
        `${date}, ${workouts} workouts, ${sessions} planned sessions`,
    },
    details: {
      sectionAria: 'Workout details for selected date',
      pasteHere: 'Paste here',
      addWorkout: 'Add workout',
      clearAfter: 'Clear after',
      plannedSessions: 'Planned Sessions',
      noPlannedSessions: 'No planned sessions.',
      fallbackPlannedWorkout: 'Planned workout',
      status: 'Status',
      previewEdit: 'Preview / edit',
      resume: 'Resume',
      start: 'Start',
      skip: 'Skip',
      completed: 'Completed',
      resetSession: 'Reset session',
      completedWorkouts: 'Completed Workouts',
      noCompletedWorkouts: 'No workouts logged for this day.',
      targetWeightLabel: 'target',
      avgPerSet: 'kg avg/set',
      copy: 'Copy',
      copyToNextWeek: '+1 week',
      edit: 'Edit',
      delete: 'Delete',
    },
    form: {
      date: 'Date',
      type: 'Type',
      selectType: 'Select type...',
      duration: 'Duration (min)',
      targetWeight: 'Target weight (kg, optional)',
      distance: 'Distance (km, optional)',
      intensity: 'Intensity (optional)',
      notSet: 'Not set',
      low: 'Low',
      medium: 'Medium',
      high: 'High',
      notes: 'Notes (optional)',
      notesPlaceholder: 'Quick notes about the workout',
      selectTypeError: 'Select a workout type.',
      durationError: 'Duration must be a positive number.',
      targetWeightError: 'Target weight must be a positive number.',
      distanceError: 'Distance must be a positive number.',
      saveChanges: 'Save changes',
      createWorkout: 'Create workout',
    },
    guided: {
      sectionAria: 'Guided workout mode',
      fallbackTitle: 'Guided Workout',
      sessionDateLine: (date: string, progressText: string) =>
        `Session date ${date} · ${progressText}`,
      endSession: 'End session',
      allExercisesComplete: 'All exercises complete',
      set: 'Set',
      of: 'of',
      target: 'target',
      reps: 'reps',
      variant: 'Variant',
      weightForSet: 'Weight for this set (kg)',
      completeSet: 'Complete set and continue',
      restTimer: 'Rest timer',
      resume: 'Resume',
      pause: 'Pause',
      reset: 'Reset',
      sessionNotes: 'Session notes',
      sessionNotesPlaceholder: 'How did the session feel?',
      finishWorkout: 'Finish workout',
      startFirstSet: 'Start your first set.',
      setsLogged: (count: number, total: number) => `${count}/${total} sets logged`,
    },
    sessionPlan: {
      workoutTitle: 'Workout title',
      notes: 'Notes',
      notesPlaceholder: 'Optional notes before starting',
      exerciseVariant: 'Exercise variant',
      sets: 'Sets',
      minReps: 'Min reps',
      maxReps: 'Max reps',
      restSec: 'Rest (sec)',
      savePlan: 'Save plan',
    },
    templateForm: {
      name: 'Template name',
      startDate: 'Start date',
      dayLabel: 'Day label',
      weekday: 'Weekday',
      exercises: 'Exercises',
      exerciseName: 'Exercise name',
      sets: 'Sets',
      minReps: 'Min reps',
      maxReps: 'Max reps',
      restSec: 'Rest (sec)',
      addDay: 'Add day',
      removeDay: 'Remove day',
      addExercise: 'Add exercise',
      removeExercise: 'Remove exercise',
      createTemplate: 'Create template',
      duplicateTemplate: 'Duplicate template',
      selectDuplicateSource: 'Template to duplicate',
      sourceTemplate: 'Source template',
      saveTemplateError: 'Template name and start date are required.',
    },
    graph: {
      emptyAria: 'Graph view empty state',
      noWorkoutData: 'No workout data yet',
      logToUnlock: 'Log workouts to unlock weekly trend lines.',
      title: 'Weekly Workout Trends',
      subtitle: 'Frequency and total duration per ISO week. Hover points for details.',
      chartAria: 'Line chart showing workouts per week and duration per week',
      tooltipWorkouts: (count: number) => `${count} workouts`,
      tooltipAvgWeight: (value: number) => `${value} kg avg`,
      avgWeightTitle: 'Average Weight Progress (kg)',
      avgWeightAria: 'Line chart showing average workout weight per week',
      avgWeightHint: 'Add weight values to sets to see weekly load progression.',
      performanceTitle: 'Performance Over Time',
      type: 'Type',
      metric: 'Metric',
      exercise: 'Exercise',
      pace: 'Pace (min/km)',
      speed: 'Speed (km/h)',
      noRunData: 'Log run workouts with distance to track pace/speed progress.',
      noStrengthData: 'No set weight data for this exercise yet.',
      yPace: 'Pace (min/km)',
      ySpeed: 'Speed (km/h)',
      yStrength: 'Best set weight (kg)',
      runPaceProgress: 'Run Pace Progress',
      runSpeedProgress: 'Run Speed Progress',
      exerciseProgress: 'Exercise Progress',
      exerciseProgressSuffix: 'Progress',
      chartSuffix: 'chart',
    },
    route: {
      failedInitTypes: 'Failed to initialize workout types.',
      failedGenerateSessions: 'Failed to generate scheduled sessions.',
      saveWorkoutError: 'Unable to save workout. Please try again.',
      confirmDeleteWorkout: 'Delete this workout?',
      deleteWorkoutError: 'Unable to delete workout.',
      confirmClearAfterDate: (date: string) =>
        `Clear all workouts and planned sessions after ${date}?`,
      clearAfterDateError: 'Unable to clear workouts after the selected date.',
      pasteWorkoutError: 'Unable to paste workout.',
      copyToNextWeekError: 'Unable to copy workout to next week.',
      importTemplateError: 'Could not import starter template.',
      createTemplateError: 'Unable to create template.',
      duplicateTemplateError: 'Unable to duplicate template.',
      startGuidedError: 'Unable to start guided workout.',
      openPlanEditorError: 'Unable to open session plan editor.',
      fallbackWorkoutLabel: 'Workout',
      confirmMoveSkipped: (workoutLabel: string, skippedDate: string, nextDate: string) =>
        `${workoutLabel} was skipped on ${skippedDate}. Move it to ${nextDate}?`,
      moveSessionError: 'Unable to move session to next day.',
      skipSessionError: 'Unable to skip session.',
      confirmResetSession:
        'Reset this completed session? Linked workout data will be removed from totals.',
      resetSessionError: 'Unable to reset session.',
      confirmAbortSession: 'End this guided session and mark it as skipped?',
      loadingWorkouts: 'Loading your workouts...',
      selectDate: 'Select a date.',
      guidedNotReady:
        'Guided session is not ready. Try re-opening it from the calendar day panel.',
      emptyStateIntro:
        'Start by importing the 4-day template or adding your first completed workout.',
      editWorkoutTitle: 'Edit workout',
      addWorkoutTitle: 'Add workout',
      createTemplateTitle: 'Create template',
      duplicateTemplateTitle: 'Duplicate template',
      previewPlanTitle: 'Preview / Edit Session Plan',
      loadingPlan: 'Loading plan...',
    },
  },
  sv: {
    common: {
      close: 'Stang',
      cancel: 'Avbryt',
      save: 'Spara',
      create: 'Skapa',
      duplicate: 'Duplicera',
      saving: 'Sparar...',
    },
    appHeader: {
      kicker: 'Traningslogg',
      title: 'Traningsoversikt',
      viewSwitcherAria: 'Vyvaxlare',
      languageSwitcherAria: 'Sprakvaxlare',
      calendar: 'Kalender',
      graphs: 'Grafer',
      templateLabel: 'Mall',
      selectTemplate: 'Valj mall',
      newTemplate: 'Ny mall',
      duplicateTemplate: 'Duplicera mall',
      importTemplate: 'Importera 4-dagarsmall',
      importingTemplate: 'Importerar...',
      addWorkout: 'Lagg till pass',
      useDarkMode: 'Anvand morkt lage',
      useLightMode: 'Anvand ljust lage',
      english: 'Engelska',
      swedish: 'Svenska',
    },
    filterBar: {
      ariaLabel: 'Filter for traningstyper',
      allTypes: 'Alla typer',
    },
    calendar: {
      sectionAria: 'Traningskalender',
      gridAria: 'Manadskalender for traning',
      previous: 'Foregaende',
      next: 'Nasta',
      weekdayLabels: ['Man', 'Tis', 'Ons', 'Tor', 'Fre', 'Lor', 'Son'],
      done: 'klara',
      planned: 'planerade',
      dayAria: (date: string, workouts: number, sessions: number) =>
        `${date}, ${workouts} pass, ${sessions} planerade pass`,
    },
    details: {
      sectionAria: 'Traningsdetaljer for valt datum',
      pasteHere: 'Klistra in har',
      addWorkout: 'Lagg till pass',
      clearAfter: 'Rensa efter',
      plannedSessions: 'Planerade pass',
      noPlannedSessions: 'Inga planerade pass.',
      fallbackPlannedWorkout: 'Planerat pass',
      status: 'Status',
      previewEdit: 'Forhandsvisa / redigera',
      resume: 'Fortsatt',
      start: 'Starta',
      skip: 'Hoppa over',
      completed: 'Klar',
      resetSession: 'Aterstall pass',
      completedWorkouts: 'Genomforda pass',
      noCompletedWorkouts: 'Inga pass loggade for denna dag.',
      targetWeightLabel: 'mal',
      avgPerSet: 'kg snitt/set',
      copy: 'Kopiera',
      copyToNextWeek: '+1 vecka',
      edit: 'Redigera',
      delete: 'Ta bort',
    },
    form: {
      date: 'Datum',
      type: 'Typ',
      selectType: 'Valj typ...',
      duration: 'Varaktighet (min)',
      targetWeight: 'Malvikt (kg, valfritt)',
      distance: 'Distans (km, valfritt)',
      intensity: 'Intensitet (valfritt)',
      notSet: 'Inte angiven',
      low: 'Lag',
      medium: 'Medel',
      high: 'Hog',
      notes: 'Anteckningar (valfritt)',
      notesPlaceholder: 'Snabba anteckningar om passet',
      selectTypeError: 'Valj en traningstyp.',
      durationError: 'Varaktighet maste vara ett positivt tal.',
      targetWeightError: 'Malvikt maste vara ett positivt tal.',
      distanceError: 'Distans maste vara ett positivt tal.',
      saveChanges: 'Spara andringar',
      createWorkout: 'Skapa pass',
    },
    guided: {
      sectionAria: 'Guidat traningslage',
      fallbackTitle: 'Guidat pass',
      sessionDateLine: (date: string, progressText: string) =>
        `Passdatum ${date} · ${progressText}`,
      endSession: 'Avsluta pass',
      allExercisesComplete: 'Alla ovningar klara',
      set: 'Set',
      of: 'av',
      target: 'mal',
      reps: 'reps',
      variant: 'Variant',
      weightForSet: 'Vikt for detta set (kg)',
      completeSet: 'Slutfor set och fortsatt',
      restTimer: 'Vilotimer',
      resume: 'Fortsatt',
      pause: 'Pausa',
      reset: 'Aterstall',
      sessionNotes: 'Passanteckningar',
      sessionNotesPlaceholder: 'Hur kandes passet?',
      finishWorkout: 'Avsluta pass',
      startFirstSet: 'Borja med forsta setet.',
      setsLogged: (count: number, total: number) => `${count}/${total} set loggade`,
    },
    sessionPlan: {
      workoutTitle: 'Passnamn',
      notes: 'Anteckningar',
      notesPlaceholder: 'Valfria anteckningar innan start',
      exerciseVariant: 'Ovningsvariant',
      sets: 'Set',
      minReps: 'Min reps',
      maxReps: 'Max reps',
      restSec: 'Vila (sek)',
      savePlan: 'Spara plan',
    },
    templateForm: {
      name: 'Mallnamn',
      startDate: 'Startdatum',
      dayLabel: 'Dagsetikett',
      weekday: 'Veckodag',
      exercises: 'Ovningar',
      exerciseName: 'Ovningsnamn',
      sets: 'Set',
      minReps: 'Min reps',
      maxReps: 'Max reps',
      restSec: 'Vila (sek)',
      addDay: 'Lagg till dag',
      removeDay: 'Ta bort dag',
      addExercise: 'Lagg till ovning',
      removeExercise: 'Ta bort ovning',
      createTemplate: 'Skapa mall',
      duplicateTemplate: 'Duplicera mall',
      selectDuplicateSource: 'Mall att duplicera',
      sourceTemplate: 'Kallmall',
      saveTemplateError: 'Mallnamn och startdatum kravs.',
    },
    graph: {
      emptyAria: 'Tomt grafvylage',
      noWorkoutData: 'Ingen traningsdata annu',
      logToUnlock: 'Logga pass for att lasa upp veckotrender.',
      title: 'Veckotrender',
      subtitle: 'Frekvens och total varaktighet per ISO-vecka. Hovra punkter for detaljer.',
      chartAria: 'Linjediagram med pass per vecka och varaktighet per vecka',
      tooltipWorkouts: (count: number) => `${count} pass`,
      tooltipAvgWeight: (value: number) => `${value} kg snitt`,
      avgWeightTitle: 'Utveckling av snittvikt (kg)',
      avgWeightAria: 'Linjediagram med genomsnittlig traningsvikt per vecka',
      avgWeightHint: 'Lagg till viktvarden pa set for att se veckobelastning.',
      performanceTitle: 'Prestation over tid',
      type: 'Typ',
      metric: 'Matt',
      exercise: 'Ovning',
      pace: 'Tempo (min/km)',
      speed: 'Hastighet (km/h)',
      noRunData: 'Logga loppass med distans for att folja tempo/hastighet.',
      noStrengthData: 'Ingen setvikt registrerad for den har ovningen an.',
      yPace: 'Tempo (min/km)',
      ySpeed: 'Hastighet (km/h)',
      yStrength: 'Basta setvikt (kg)',
      runPaceProgress: 'Tempoutveckling',
      runSpeedProgress: 'Hastighetsutveckling',
      exerciseProgress: 'Ovningsutveckling',
      exerciseProgressSuffix: 'utveckling',
      chartSuffix: 'diagram',
    },
    route: {
      failedInitTypes: 'Kunde inte initiera traningstyper.',
      failedGenerateSessions: 'Kunde inte skapa planerade pass.',
      saveWorkoutError: 'Kunde inte spara passet. Forsok igen.',
      confirmDeleteWorkout: 'Ta bort det har passet?',
      deleteWorkoutError: 'Kunde inte ta bort passet.',
      confirmClearAfterDate: (date: string) =>
        `Rensa alla pass och planerade pass efter ${date}?`,
      clearAfterDateError: 'Kunde inte rensa pass efter valt datum.',
      pasteWorkoutError: 'Kunde inte klistra in passet.',
      copyToNextWeekError: 'Kunde inte kopiera passet till nasta vecka.',
      importTemplateError: 'Kunde inte importera startmall.',
      createTemplateError: 'Kunde inte skapa mall.',
      duplicateTemplateError: 'Kunde inte duplicera mall.',
      startGuidedError: 'Kunde inte starta guidat pass.',
      openPlanEditorError: 'Kunde inte oppna passplan-redigeraren.',
      fallbackWorkoutLabel: 'Pass',
      confirmMoveSkipped: (workoutLabel: string, skippedDate: string, nextDate: string) =>
        `${workoutLabel} hoppades over ${skippedDate}. Flytta det till ${nextDate}?`,
      moveSessionError: 'Kunde inte flytta passet till nasta dag.',
      skipSessionError: 'Kunde inte hoppa over passet.',
      confirmResetSession:
        'Aterstalla det har avslutade passet? Lankad passdata tas bort fran summeringar.',
      resetSessionError: 'Kunde inte aterstalla passet.',
      confirmAbortSession: 'Avsluta det har guidede passet och markera det som overhoppat?',
      loadingWorkouts: 'Laddar dina pass...',
      selectDate: 'Valj ett datum.',
      guidedNotReady:
        'Guidat pass ar inte redo. Forsok oppna det igen fran dagens panel i kalendern.',
      emptyStateIntro:
        'Borja med att importera 4-dagarsmallen eller lagg till ditt forsta genomforda pass.',
      editWorkoutTitle: 'Redigera pass',
      addWorkoutTitle: 'Lagg till pass',
      createTemplateTitle: 'Skapa mall',
      duplicateTemplateTitle: 'Duplicera mall',
      previewPlanTitle: 'Forhandsvisa / redigera passplan',
      loadingPlan: 'Laddar plan...',
    },
  },
} as const

export type AppCopy = (typeof COPY)[AppLanguage]

export function getCopy(language: AppLanguage): AppCopy {
  return COPY[language]
}

export function getDateLocale(language: AppLanguage): Locale {
  return DATE_LOCALES[language]
}

export function localizeWorkoutTypeName(
  workoutType: { id: string; name: string },
  language: AppLanguage,
): string {
  return WORKOUT_TYPE_NAMES[language][workoutType.id] ?? workoutType.name
}

export function localizeSessionStatus(
  status: ScheduledSessionStatus,
  language: AppLanguage,
): string {
  return SESSION_STATUS_LABELS[language][status]
}

export function localizeIntensity(
  intensity: WorkoutIntensity,
  language: AppLanguage,
): string {
  return INTENSITY_LABELS[language][intensity]
}
